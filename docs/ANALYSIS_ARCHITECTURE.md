# ๐๏ธ Arquitectura de Anรกlisis de Calidad de Cรณdigo

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     SISTEMA DE ANรLISIS DE CALIDAD                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

CAPAS DE ANรLISIS:

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA 1: ANรLISIS LOCAL (En tu mรกquina)                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  Python Scripts:                                                        โ
โ  โโ sonar_code_analysis.py          โ Anรกlisis personalizado           โ
โ  โ  โโ Complejidad ciclomรกtica                                         โ
โ  โ  โโ Detecta cรณdigo duplicado                                        โ
โ  โ  โโ Identifica funciones largas                                     โ
โ  โ  โโ Analiza estilo de cรณdigo                                        โ
โ  โ                                                                      โ
โ  โโ advanced_code_analysis.py       โ Anรกlisis con herramientas       โ
โ  โ  โโ Radon (MI, complejidad)                                         โ
โ  โ  โโ Pylint (problemas estรกticos)                                    โ
โ  โ  โโ Vulture (cรณdigo muerto)                                         โ
โ  โ                                                                      โ
โ  โโ refactor_code.py                โ Refactorizaciรณn automรกtica      โ
โ     โโ Crea utilities.py                                               โ
โ     โโ Genera guรญas de refactorizaciรณn                                 โ
โ     โโ Propone patrones de mejora                                      โ
โ                                                                          โ
โ  Salida: Reportes en docs/sonarcloud_reports/                          โ
โ          โโ *.md (markdown para lectura)                               โ
โ          โโ *.json (datos estructurados)                               โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA 2: ANรLISIS EN NUBE (SonarCloud)                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  SonarCloud.io                                                          โ
โ  โโ Anรกlisis estรกtico de cรณdigo                                        โ
โ  โโ Detecciรณn de vulnerabilidades                                      โ
โ  โโ Mรฉtricas de complejidad                                            โ
โ  โโ Tracking histรณrico                                                 โ
โ  โโ Quality Gate                                                        โ
โ                                                                          โ
โ  Configuraciรณn:                                                         โ
โ  โโ sonar-project.properties                                           โ
โ  โโ sonar.projectKey=final-project-ml                                  โ
โ  โโ sonar.organization=juansnuno                                       โ
โ  โโ Token en GitHub Secrets โ SONAR_TOKEN                             โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA 3: AUTOMATIZACIรN (GitHub Actions)                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  .github/workflows/sonarcloud.yml                                       โ
โ  โ                                                                      โ
โ  โโโ [En cada push/PR]                                                 โ
โ  โ   โโ Checkout cรณdigo                                                โ
โ  โ   โโ Setup Python 3.11                                              โ
โ  โ   โโ Instalar dependencias                                          โ
โ  โ   โโ Ejecutar tests (pytest)                                        โ
โ  โ   โโ Generar coverage.xml                                           โ
โ  โ   โโ Ejecutar SonarCloud Scan                                       โ
โ  โ   โโ Validar Quality Gate                                           โ
โ  โ                                                                      โ
โ  โโโ Salida: Dashboard en SonarCloud                                   โ
โ      โโ https://sonarcloud.io/dashboard?id=final-project-ml           โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CAPA 4: DOCUMENTACIรN Y GUรAS                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  docs/                                                                  โ
โ  โโ SONARCLOUD_COMPLETE_GUIDE.md                                       โ
โ  โ  โโ Configuraciรณn detallada                                         โ
โ  โ  โโ Explicaciรณn de mรฉtricas                                         โ
โ  โ  โโ Plan de acciรณn completo                                         โ
โ  โ  โโ Ejemplos de refactorizaciรณn                                     โ
โ  โ                                                                      โ
โ  โโ REFACTORING_GUIDE.md                                               โ
โ  โ  โโ Paso a paso para cada funciรณn                                   โ
โ  โ  โโ Patrones de diseรฑo                                              โ
โ  โ  โโ Checklist de implementaciรณn                                     โ
โ  โ                                                                      โ
โ  โโ SONARCLOUD_IMPLEMENTATION_SUMMARY.md                               โ
โ  โ  โโ Resumen ejecutivo                                               โ
โ  โ  โโ Instrucciones paso a paso                                       โ
โ  โ  โโ Checklist de tareas                                             โ
โ  โ                                                                      โ
โ  โโ sonarcloud_reports/                                                โ
โ     โโ sonar_analysis_*.md                                             โ
โ     โโ sonar_analysis_*.json                                           โ
โ     โโ advanced_analysis_*.md                                          โ
โ     โโ advanced_analysis_*.json                                        โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


FLUJO DE ANรLISIS:

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ PASO 1: DESARROLLO LOCAL                                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  developer  โโ  Escribe cรณdigo  โโ  python sonar_code_analysis.py     โ
โ                                       python advanced_code_analysis.py โ
โ                                                                          โ
โ  Genera reportes locales para validar calidad antes de push            โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ PASO 2: PUSH A GITHUB                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  git commit  โโ  git push origin feature-branch                        โ
โ                   โ                                                     โ
โ                   โโโ GitHub Actions Trigger                           โ
โ                       โโโ .github/workflows/sonarcloud.yml             โ
โ                           โโ Run tests                                 โ
โ                           โโ Generate coverage                         โ
โ                           โโ Send to SonarCloud                        โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ PASO 3: ANรLISIS EN SONARCLOUD                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  SonarCloud receives data                                               โ
โ  โ                                                                      โ
โ  โโโ Ejecuta anรกlisis profundo                                         โ
โ  โโโ Compara con baseline                                              โ
โ  โโโ Calcula mรฉtricas                                                  โ
โ  โโโ Valida Quality Gate                                               โ
โ  โโโ Publica resultados en dashboard                                   โ
โ                                                                          โ
โ  GitHub recibe status: PASS โ o FAIL โ                               โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ PASO 4: REVISIรN Y MERGE                                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  Pull Request                                                           โ
โ  โโ SonarCloud check: PASS โ                                           โ
โ  โโ Tests: PASS โ                                                      โ
โ  โโ Code Review: APPROVED โ                                            โ
โ  โโโ MERGE A MAIN                                                      โ
โ                                                                          โ
โ  Si algo falla:                                                         โ
โ  โโโ Feedback en PR                                                     โ
โ      โโโ Developer revisa SonarCloud                                    โ
โ          โโโ Refactoriza                                               โ
โ              โโโ Push nuevamente                                        โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


HERRAMIENTAS Y SUS RESPONSABILIDADES:

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Herramienta          โ Responsabilidad          โ Ubicaciรณn            โ
โโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโค
โ Radon                โ Complejidad, MI          โ Local + SonarCloud   โ
โ Pylint               โ Problemas estรกticos      โ Local + SonarCloud   โ
โ Vulture              โ Cรณdigo muerto            โ Local                โ
โ pytest               โ Tests unitarios          โ Local + GitHub       โ
โ SonarCloud           โ Anรกlisis integral        โ Nube                 โ
โ GitHub Actions       โ Automatizaciรณn CI/CD     โ Nube                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


MรTRICAS RECOLECTADAS:

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Mรฉtrica                      โ Ideal    โ Actual โ Herramienta        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโค
โ Complejidad Ciclomรกtica Mรกx  โ < 10     โ 16     โ Radon + Anรกlisis   โ
โ Complejidad Ciclomรกtica Prom โ < 5      โ 5.8    โ Radon + Anรกlisis   โ
โ รndice Mantenibilidad (MI)   โ > 70     โ 66     โ Radon              โ
โ Funciones Largas (>50 lรญneas)โ 0        โ 7      โ Anรกlisis + Radon   โ
โ Cรณdigo Duplicado             โ < 0.5%   โ ~1%    โ Anรกlisis           โ
โ Code Coverage                โ > 80%    โ TBD    โ pytest-cov         โ
โ Problemas Crรญticos           โ 0        โ 3      โ Pylint             โ
โ Problemas Altos              โ 0        โ 2      โ Pylint             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


ESTRUCTURA DE ARCHIVOS GENERADOS:

final-project-ml/
โโโ .github/
โ   โโโ workflows/
โ       โโโ sonarcloud.yml .......................... CI/CD Workflow
โโโ .pylintrc ...................................... Configuraciรณn Pylint
โโโ sonar-project.properties ........................ Configuraciรณn SonarCloud
โโโ sonar_code_analysis.py .......................... Script anรกlisis local
โโโ advanced_code_analysis.py ....................... Script anรกlisis avanzado
โโโ refactor_code.py ................................ Script refactorizaciรณn
โโโ SONARCLOUD_IMPLEMENTATION_SUMMARY.md ........... Este resumen
โโโ docs/
โ   โโโ SONARCLOUD_COMPLETE_GUIDE.md ............... Guรญa completa
โ   โโโ REFACTORING_GUIDE.md ........................ Guรญa refactorizaciรณn
โ   โโโ SONARCLOUD_SETUP.md ......................... Setup bรกsico
โ   โโโ sonarcloud_reports/
โ       โโโ sonar_analysis_20251110_160623.md ...... Reporte bรกsico
โ       โโโ sonar_analysis_20251110_160623.json .... Datos JSON
โ       โโโ advanced_analysis_20251110_160845.md ... Reporte avanzado
โ       โโโ advanced_analysis_20251110_160845.json . Datos JSON
โโโ mlops_pipeline/src/
    โโโ utilities.py ................................ Cรณdigo compartido


PRรXIMOS PASOS:

1. SEMANA 1: CONFIGURACIรN
   โโ Crear cuenta en SonarCloud
   โโ Obtener token
   โโ Configurar GitHub Secrets
   โโ Ejecutar primer anรกlisis

2. SEMANA 2: REFACTORIZACIรN FASE 1
   โโ Refactorizar funciones crรญticas
   โโ Validar en local con sonar_code_analysis.py
   โโ Re-ejecutar en SonarCloud

3. SEMANA 3-4: REFACTORIZACIรN FASE 2
   โโ Mejorar รญndice de mantenibilidad
   โโ Aumentar code coverage

4. SEMANA 5-6: OPTIMIZACIONES
   โโ Alcanzar Quality Gate
   โโ Establecer estรกndares de equipo

---

Diagrama preparado por: GitHub Copilot
Fecha: 2025-11-10
Estado: โ Listo para implementaciรณn
